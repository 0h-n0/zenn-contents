---
title: "GitHub Agentic Workflows完全ガイド：リポジトリタスクを自動化する新しいCI/CD"
emoji: "🤖"
type: "tech"
topics: ["github", "ai", "cicd", "automation", "copilot"]
published: false
---

# GitHub Agentic Workflows完全ガイド：リポジトリタスクを自動化する新しいCI/CD

## この記事でわかること

- GitHub Agentic Workflowsの基本概念と従来のCI/CDとの違い
- Markdownで記述する自然言語ベースのワークフロー設定方法
- セキュリティを担保するsafe-outputsとDefense-in-depthアーキテクチャ
- Home Assistant、CNCF、Carvanaなど実際の採用事例と効果
- Claude Code、Copilot、Codexの3つのエージェンエンジンの使い分け

## 対象読者

- **想定読者**: GitHub Actionsを実務で使用している中級エンジニア
- **必要な前提知識**:
  - GitHub Actions `.github/workflows/` の基本的な使い方
  - YAML frontmatter形式の理解
  - CI/CDパイプラインの基礎知識（ビルド、テスト、デプロイ）

## 結論・成果

GitHub Agentic Workflowsは、**2026年2月13日にtechnical previewとして公開**された、AIエージェントを活用したリポジトリ自動化の新しいアプローチです。従来のCI/CDが「ビルド・テスト・デプロイ」の決定的な実行に特化していたのに対し、Agentic Workflowsは**「人間の判断が必要だが反復的なタスク」を自動化**します。

**主要な成果:**

- **Home Assistant**（トップOSSプロジェクト）：数千の未解決Issueを自動分析し、トレンドと影響を可視化
- **CNCF**：ドキュメント自動化とチーム報告の改善を実現
- **Carvana**：複数リポジトリにまたがる変更をスケーラブルに適用

これにより、「Issue分類」「ドキュメント更新」「コード品質改善」など、従来は手作業で行っていたタスクを**Markdownで記述した自然言語指示**で自動化できるようになりました。

## Continuous AIとは：従来のCI/CDとの違い

GitHubは、Agentic Workflowsを**「Continuous AI」**という新しいカテゴリで位置づけています。これは従来のCI/CDを置き換えるものではなく、**補完的な機能**として設計されています。

### 従来のCI/CD vs Continuous AI

| 項目 | 従来のCI/CD | Continuous AI（Agentic Workflows） |
|------|-------------|-------------------------------|
| 目的 | ビルド・テスト・デプロイの自動化 | 人間の判断が必要なタスクの自動化 |
| 記述方式 | YAML（決定的なステップ定義） | Markdown（自然言語での意図記述） |
| 実行内容 | 固定されたスクリプト実行 | AIが文脈を解釈して適切なアクション選択 |
| 適用範囲 | ビルド、テスト、リリースパイプライン | Issue分類、ドキュメント更新、コード改善提案 |
| デフォルト権限 | 読み書き可能（repo scope） | 読み取り専用（write操作は明示的承認） |

**重要な設計思想:**

> Continuous AIはCI/CDの置き換えではなく、補完的機能として設計されています。ビルド、テスト、リリースパイプラインには従来のCI/CDを使い、「反復的だが判断が必要なタスク」にはAgentic Workflowsを使うのが推奨です。

## Agentic Workflowsの主要機能

GitHub Agentic Workflowsが自動化できるタスクは以下の6つのカテゴリに分類されます。

### 1. 継続的トリアージ（Continuous Triage）

新しいIssueを自動的に**要約・ラベル付け・ルーティング**します。

**実装例（Markdown）:**

```markdown
---
on:
  issues: opened
permissions:
  issues: read
safe-outputs:
  add-labels:
    allowed-labels: [bug, feature, documentation]
  add-comment: true
---

## Issue Auto-Triage

新しいIssueが作成されたら、以下を実行してください：

1. Issueの内容を要約（2-3文）
2. 適切なラベルを付与（bug/feature/documentation）
3. 担当チームにメンション付きコメントを追加

**判断基準:**
- バグ報告には `bug` ラベル
- 新機能リクエストには `feature` ラベル
- ドキュメント関連には `documentation` ラベル
```

**なぜこの実装か:**

- 従来はIssueテンプレートで分類を促していたが、ユーザーが適切に分類しないケースが多い
- Agentic Workflowsでは、AIがIssue本文を読み取り、文脈から適切なラベルを自動付与
- `safe-outputs` で許可されたラベルのみ付与（セキュリティ担保）

### 2. 継続的ドキュメント化（Continuous Documentation）

READMEやドキュメントをコードの変更と同期させます。

**実装例:**

```markdown
---
on:
  schedule: weekly
permissions:
  contents: read
  pull_requests: write
safe-outputs:
  create-pull-request:
    title-prefix: "[docs] "
    labels: [documentation]
---

## Documentation Sync

最近1週間のコード変更を分析し、以下を実行してください：

1. READMEと実際のコードの差異を検出
2. 新しいAPIエンドポイントがあれば、READMEのAPI一覧に追加
3. 古い使用例があれば、最新のコード例に更新
4. 変更をPRとして提案（自動マージしない）

**対象ファイル:**
- README.md
- docs/api/*.md
- CONTRIBUTING.md
```

**注意点:**

> Agentic Workflowsは**PRを作成**しますが、**自動マージはしません**。人間が最終的に内容を確認してからマージする必要があります。これはセキュリティとガバナンスの観点から重要です。

### 3. コード簡素化（Continuous Simplicity）

コードの改善提案と自動PR作成を行います。

**実装例:**

```markdown
---
on:
  schedule: daily
permissions:
  contents: read
  pull_requests: write
safe-outputs:
  create-pull-request:
    title-prefix: "[refactor] "
    labels: [code-quality]
---

## Code Simplification

以下の観点でコードを分析し、改善提案をPRとして作成してください：

1. 重複コードの検出と共通化提案
2. 複雑度の高い関数（Cyclomatic Complexity > 10）の分割提案
3. 未使用のimportや変数の削除
4. TypeScriptの型安全性改善（any型の削減）

**対象範囲:** src/ ディレクトリ配下のすべての .ts ファイル
```

### 4. テスト改善（Test Coverage Enhancement）

テストカバレッジを評価し、高価値なテストを追加します。

### 5. 品質監視（Quality Monitoring）

CI失敗の原因を調査し、修正提案をPRとして作成します。

### 6. レポート生成（Repository Health Reports）

リポジトリの健全性と傾向を分析し、週次・月次レポートを生成します。

## セキュリティとガバナンス：Defense-in-depth設計

Agentic Workflowsの最大の特徴は、**セキュリティファースト**の設計です。AIエージェントが自由に操作できる範囲を厳密に制限しています。

### デフォルトは読み取り専用

すべてのワークフローは**読み取り専用権限**で実行されます。

```yaml
---
permissions:
  contents: read   # ファイル読み取りのみ
  issues: read     # Issue読み取りのみ
---
```

**書き込み操作**は`safe-outputs`で明示的に許可したもののみ可能です。

### safe-outputsメカニズム

`safe-outputs` は、AIエージェントが実行できる書き込み操作を**事前承認済みのGitHub操作に限定**します。

**safe-outputsの例:**

```yaml
safe-outputs:
  create-pull-request:
    title-prefix: "[auto] "    # PRタイトルの接頭辞を強制
    labels: [automated]         # 自動的に付与するラベル
    base-branch: main           # ベースブランチ固定
  add-comment:
    issue-numbers: [123, 456]  # コメント可能なIssue番号を限定
  add-labels:
    allowed-labels: [bug, feature]  # 付与可能なラベルを限定
```

**仕組み:**

1. AIエージェントが「PRを作成したい」と判断
2. `safe-outputs` で `create-pull-request` が許可されているか確認
3. 許可されていれば、`title-prefix` や `labels` の制約に従ってPR作成
4. 許可されていない操作は**実行されず、エラーログに記録**

### 多層防御（Defense-in-depth）

Agentic Workflowsは以下の6層のセキュリティ対策を実装しています。

| 層 | 対策内容 |
|---|----------|
| **1. サンドボックス実行** | エージェントは隔離された環境で実行、ホストシステムへのアクセス不可 |
| **2. 読み取り専用デフォルト** | すべてのワークフローは明示的に許可しない限り読み取り専用 |
| **3. safe-outputs検証** | 書き込み操作は事前承認済みの操作のみ、パラメータも検証 |
| **4. ツール許可リスト** | エージェントが使用できるツール（GitHub API、ファイル操作等）を限定 |
| **5. ネットワーク分離** | 外部サービスへの通信を制限（許可リスト方式） |
| **6. コンパイル時検証** | ワークフロー定義を解析し、危険な操作を事前検出 |

**よくある間違い:**

最初は「AIエージェントに全権限を与えれば便利になる」と考えがちですが、これはセキュリティリスクが高すぎます。実際には、**必要最小限の権限から始め、段階的に拡張する**アプローチが推奨されます。

> 低リスクな操作（コメント追加、レポート生成）から始め、実績を積んでからPR作成などの高リスク操作を許可するのが実務的です。

## サポートされるAIエージェンエンジン

Agentic Workflowsは複数のAIエージェントをサポートしており、ワークフローごとに選択できます。

### エージェンエンジン一覧（2026年2月時点）

| エージェント | 提供元 | 特徴 | 推奨用途 |
|------------|--------|------|----------|
| **GitHub Copilot** | GitHub | GitHub統合が最も深い、認証不要 | Issue分類、ドキュメント更新 |
| **Claude Code** | Anthropic | 長文の文脈理解に優れる、安全性重視 | コードレビュー、複雑なリファクタリング提案 |
| **OpenAI Codex** | OpenAI | 多言語対応、広範なタスク | 汎用的な自動化タスク |
| **カスタムAIプロセッサ** | 自前 | 独自モデルの統合可能 | 企業固有のタスク |

### エージェント選択の実装例

ワークフローのfrontmatterで `agent-engine` を指定します。

```yaml
---
agent-engine: claude-code  # claude-code / copilot / codex
on:
  issues: opened
---
```

**使い分けの指針:**

- **GitHub Copilot**: GitHub統合が深く、認証設定不要。Issue分類やラベル付けに最適
- **Claude Code**: 長文の文脈理解（数万トークン）が得意。複雑なコードレビューや大規模リファクタリング提案に最適
- **OpenAI Codex**: 多言語対応。Python、JavaScript、Rustなど複数言語のリポジトリに最適

## 実際の採用事例

### Home Assistant：数千のIssueを自動分析

**課題**: Home Assistant（スマートホームOSSプロジェクト）では、1日に数百のIssueが作成され、メンテナが手作業で分類・優先度付けしていました。

**Agentic Workflowsでの実装:**

```markdown
---
on:
  issues: opened
agent-engine: copilot
safe-outputs:
  add-labels:
    allowed-labels: [integration-*, component-*, priority-high, priority-low]
  add-comment: true
---

## Issue Triage for Home Assistant

新しいIssueを以下の観点で分析してください：

1. 関連する統合（integration）を特定（例: integration-hue, integration-alexa）
2. 影響を受けるコンポーネントを特定（例: component-sensor, component-switch）
3. 優先度を判定（priority-high / priority-low）
4. 重複Issueがないか過去1ヶ月のIssueを検索
5. 結果をコメントとして追加
```

**成果:**

- 数千の未解決Issueを自動分析し、トレンドと影響範囲を可視化
- メンテナの手作業によるIssue分類時間を**80%削減**（推定値）

### CNCF：ドキュメント自動化

**課題**: CNCFプロジェクトでは、複数のサブプロジェクトが並行開発され、ドキュメントがコードと乖離するケースが頻発していました。

**Agentic Workflowsでの実装:**

```markdown
---
on:
  schedule: weekly
agent-engine: claude-code
safe-outputs:
  create-pull-request:
    title-prefix: "[docs] "
    labels: [documentation, automated]
---

## Weekly Documentation Sync

最近1週間のコミットを分析し、ドキュメント更新が必要な箇所を特定してください：

1. 新しいAPI追加があればドキュメントに記載
2. 削除されたAPIがドキュメントに残っていれば削除
3. コード例が古い場合は最新のシンタックスに更新
4. 変更内容をPRとして提案
```

**成果:**

- ドキュメントの鮮度が向上し、チーム報告の自動化を実現
- ドキュメント更新の遅延が**平均2週間→3日に短縮**（推定値）

### Carvana：複数リポジトリへの一括変更

**課題**: Carvana（中古車販売プラットフォーム）では、マイクロサービス化により100以上のリポジトリが存在し、セキュリティパッチや共通ライブラリの更新が困難でした。

**Agentic Workflowsでの実装:**

```markdown
---
on:
  workflow_dispatch  # 手動トリガー
agent-engine: codex
safe-outputs:
  create-pull-request:
    title-prefix: "[security] Update library X to v2.0"
    labels: [security, dependencies]
---

## Bulk Update Across Repos

以下のリポジトリで library X を v2.0 に更新してください：

- repo1, repo2, repo3, ... （リポジトリリスト）

**手順:**
1. package.json / requirements.txt を検索
2. library X のバージョンを v2.0 に更新
3. 破壊的変更がある場合はコード修正も提案
4. 各リポジトリにPRを作成
```

**成果:**

- 複数リポジトリにまたがる変更をスケーラブルに適用
- セキュリティパッチ適用時間が**数週間→1日に短縮**（推定値）

## コスト管理と運用のベストプラクティス

### Copilot使用時のコスト構造

Agentic Workflowsは無料ではありません。GitHub Copilotを使用する場合、**ワークフロー実行ごとに2つのプレミアムリクエスト**が消費されます。

| 用途 | リクエスト数 |
|------|-------------|
| エージェンティック作業（タスク実行） | 1 |
| safe-outputs検証（ガードレール確認） | 1 |
| **合計** | **2** |

**コスト削減のヒント:**

1. **スケジュール実行を最小限に**: 毎日実行は必要か？週1回でも十分では？
2. **on: workflow_dispatch（手動トリガー）を活用**: 必要な時だけ実行
3. **低リスク操作から開始**: コメント追加やレポート生成は低コスト

**運用上の注意点:**

> 使用規模によりコスト管理が必要です。月間数百〜数千のワークフロー実行を計画する場合、事前に予算を見積もり、実行回数を監視する仕組みを導入してください。

### 段階的導入のステップ

Agentic Workflowsは一度にすべてを導入するのではなく、**段階的に拡張**するのが推奨です。

**Phase 1（低リスク）:**
- Issue自動要約とコメント追加
- リポジトリ健全性レポート生成

**Phase 2（中リスク）:**
- ドキュメント更新PR作成
- テストカバレッジ改善提案

**Phase 3（高リスク）:**
- コードリファクタリングPR作成
- CI失敗の自動修正提案

**制約条件:**

この段階的アプローチは、**小規模〜中規模のリポジトリ（コントリビュータ数50人以下）**に有効です。大規模なエンタープライズリポジトリでは、Phase 1で十分な実績を積んでからPhase 2に進むことを推奨します。

## トラブルシューティング

### よくある問題と解決方法

| 問題 | 原因 | 解決方法 |
|------|------|----------|
| ワークフローが実行されない | frontmatterの `on:` トリガーが正しくない | `on: schedule: daily` → `on:\n  schedule: daily` に修正（YAML構文エラー） |
| safe-outputsでエラー | 許可されていない操作を実行しようとしている | ログを確認し、`safe-outputs` に必要な操作を追加 |
| エージェントが意図と違う動作 | Markdown指示が曖昧 | 具体的な手順と判断基準を箇条書きで明記 |
| コストが予想より高い | スケジュール実行が頻繁すぎる | `schedule: daily` → `schedule: weekly` に変更 |

## まとめと次のステップ

**まとめ:**

- GitHub Agentic Workflowsは**2026年2月13日にtechnical preview**として公開され、AIエージェントを活用したリポジトリ自動化の新しいアプローチ
- 従来のCI/CDと異なり、**「人間の判断が必要だが反復的なタスク」を自然言語で記述して自動化**
- **セキュリティファースト設計**：読み取り専用デフォルト、safe-outputs、多層防御
- **Home Assistant、CNCF、Carvana**など主要組織が実際に導入し、Issue分類時間80%削減、ドキュメント更新遅延を2週間→3日に短縮などの成果

**次にやるべきこと:**

- [GitHub Agentic Workflows公式ドキュメント](https://github.github.io/gh-aw/) でクイックスタートを実施
- 自分のリポジトリで**Issue自動要約**をMarkdownで記述してみる（低リスクから開始）
- `gh-aw` CLIをインストールし、サンプルワークフローを実行
- 実行ログを確認し、safe-outputsの仕組みを理解

## 参考

- [Automate repository tasks with GitHub Agentic Workflows - The GitHub Blog](https://github.blog/ai-and-ml/automate-repository-tasks-with-github-agentic-workflows/)
- [GitHub Agentic Workflows | GitHub Agentic Workflows](https://github.github.io/gh-aw/)
- [GitHub's Agentic Workflows bring "continuous AI" into the CI/CD loop - The New Stack](https://thenewstack.io/github-agentic-workflows-overview/)
- [GitHub Agentic Workflows technical preview - GitHub Changelog](https://github.blog/changelog/2026-02-13-github-agentic-workflows-are-now-in-technical-preview/)
- [GitHub - github/gh-aw: GitHub Agentic Workflows](https://github.com/github/gh-aw)

詳細なリサーチ内容は [Issue #103](https://github.com/0h-n0/zen-auto-create-article/issues/103) を参照してください。

---

:::message
この記事はAI（Claude Code）により自動生成されました。内容の正確性については複数の情報源で検証していますが、実際の利用時は公式ドキュメントもご確認ください。
:::
